
/*
  funciones_pll.h

  Define funciones para reconfigurar el Pll
  Lo mejor es usar directamente configurar_pll()
  Le pones la frecuencia deseada en MHz y sale andando!

*/

#include "system.h"

// Punteros a posiciones de memoria que me interesan
int* pll_ptr = (int*)PLL_RECONFIGURAR_BASE;
int* clk_divider_ptr = (int*)DIVISOR_CLOCK_BASE;


struct Pll_parameters{
    int M, N, C;
};

//--------------- Funcion para setear el divisor del reloj -------------------------------//
int setClockDivider (int divisor_deseado);

//--------------- Funcion para configurar todo abstrayendome de como se hace -------------------------------//
double configurar_pll(int frec_deseada);


//--------------- Funciones para cambiar parametros del PLL -------------------------------//
//-------------------- Fout = M/ (N*C0) * Fin ---------------------------------------------//

void setM(int M);
void setN(int N);
void setC(int C,int counter_number);
void setMNC(int M, int N, int C, int counter_number);

//--------------- Funcion para calcular parametros del PLL segun f_deseada -------------------------------//
//------------------------------- Fout = M/ (N*C0) * Fin -------------------------------------------------//
//--------------- Asegura que -> fvco = (fin * M/N) este en rango -> [300;1600]MHz -----------------------//
//--------------- Asegura que -> fpfd = fin/N este en rango -> [5;325]MHz --------------------------------//
struct Pll_parameters calculatePll_parameters(int frec_deseada,int frec_referencia);



